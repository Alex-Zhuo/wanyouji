# Generated by Django 3.0 on 2025-07-10 10:59

import common.utils
from django.conf import settings
import django.core.validators
from django.db import migrations, models
import django.db.models.deletion
import mall.models
import mall.utils
import ticket.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('express', '0002_auto_20250710_1059'),
        ('mall', '0001_initial'),
        ('mp', '0001_initial'),
        ('shopping_points', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='DouYinStore',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='店铺名称')),
                ('supplier_ext_id', models.CharField(max_length=50, verbose_name='店铺ID')),
                ('enable', models.BooleanField(default=True, verbose_name='是否使用')),
            ],
            options={
                'verbose_name': '抖音店铺',
                'verbose_name_plural': '抖音店铺',
            },
        ),
        migrations.CreateModel(
            name='DownLoadTask',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20, verbose_name='任务名称')),
                ('status', models.IntegerField(choices=[(0, '未执行'), (1, '导出中'), (2, '导出失败'), (3, '导出完成')], default=0, verbose_name='状态')),
                ('source_type', models.IntegerField(choices=[(1, '演出订单')], default=1, verbose_name='类型')),
                ('export_file', models.FileField(blank=True, null=True, upload_to='', verbose_name='文件')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='导出时间')),
            ],
            options={
                'verbose_name': '导出记录',
                'verbose_name_plural': '导出记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='MaiZuoLoginLog',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('msg', models.CharField(max_length=200, verbose_name='内容')),
                ('status', models.IntegerField(choices=[(1, '未处理'), (2, '已处理')], default=1, verbose_name='状态')),
                ('source_type', models.IntegerField(choices=[(1, '登录失败'), (2, '同步状态失败')], default=1, verbose_name='类型')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='时间')),
            ],
            options={
                'verbose_name': '麦座登录日志',
                'verbose_name_plural': '麦座登录日志',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='PerformerFlag',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=10, verbose_name='名称')),
            ],
            options={
                'verbose_name': '演员标签',
                'verbose_name_plural': '演员标签',
            },
        ),
        migrations.CreateModel(
            name='Seat',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('seat_no', models.CharField(db_index=True, editable=False, max_length=100, null=True, verbose_name='座位编号')),
                ('row', models.IntegerField(default=0, verbose_name='行数')),
                ('column', models.IntegerField(default=0, verbose_name='列数')),
                ('layers', models.IntegerField(default=1, verbose_name='层数')),
            ],
            options={
                'verbose_name': '场馆座位',
                'verbose_name_plural': '场馆座位',
            },
        ),
        migrations.CreateModel(
            name='SessionInfo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('no', models.CharField(db_index=True, default=common.utils.get_no, max_length=64, null=True, unique=True, verbose_name='编号')),
                ('title', models.CharField(blank=True, help_text='60个字内,不填则默认项目名称，仅用于推送抖音/快手/小红书显示', max_length=60, null=True, verbose_name='抖音/快手/小红书商品名称')),
                ('start_at', models.DateTimeField(db_index=True, verbose_name='演出开始时间')),
                ('end_at', models.DateTimeField(db_index=True, verbose_name='演出结束时间')),
                ('dy_sale_time', models.DateTimeField(blank=True, null=True, verbose_name='抖音/快手开售时间')),
                ('valid_start_time', models.DateTimeField(blank=True, help_text='抖音用：不填默认演出开始时间前2个小时', null=True, verbose_name='门票有效期开始时间')),
                ('desc', models.CharField(blank=True, max_length=100, null=True, verbose_name='场次备注')),
                ('open_limit', models.BooleanField(default=False, editable=False, verbose_name='场次限购')),
                ('name_limit_num', models.IntegerField(default=1, editable=False, help_text='购票限制', verbose_name='每个证件限购数量')),
                ('has_seat', models.IntegerField(choices=[(1, '有座'), (2, '无座')], default=1, verbose_name='是否有座')),
                ('order_limit_num', models.IntegerField(default=0, help_text='购票限制,0表示不限购', verbose_name='每个订单限购数量')),
                ('status', models.IntegerField(choices=[(1, '上架'), (2, '下架')], default=2, verbose_name='状态')),
                ('is_delete', models.BooleanField(default=False, verbose_name='是否作废')),
                ('is_theater_discount', models.BooleanField(default=True, verbose_name='是否参与剧场会员卡优惠')),
                ('is_sale_off', models.BooleanField(default=False, verbose_name='标记售罄')),
                ('is_paper', models.BooleanField(default=False, help_text='勾选的场次对应的订单需要邮寄纸质票给客户', verbose_name='是否纸质票')),
                ('name_buy_num', models.PositiveIntegerField(default=0, verbose_name='实名购票限购数量')),
                ('is_name_buy', models.BooleanField(default=False, help_text='开启后用户购买时需要选择已实名的常用联系人信息，0.01购票权限用户不走实名流程', verbose_name='是否实名购票')),
                ('express_days', models.IntegerField(default=0, help_text='单位/天，设置后开演前n天下单的可以邮寄，不足n天的需要现场取票入场', verbose_name='开演前多少天下单可邮寄')),
                ('close_comment', models.BooleanField(default=False, verbose_name='是否关闭评论')),
                ('is_dy_code', models.BooleanField(default=False, help_text='勾选后需要填写动态有效时间才能有效', verbose_name='是否动态码')),
                ('dc_expires_in', models.PositiveIntegerField(default=0, help_text='单位：分钟', verbose_name='动态码有效时间')),
                ('dy_status', models.IntegerField(choices=[(1, '上架'), (2, '下架')], default=2, verbose_name='抖音状态')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('is_price', models.BooleanField(default=False, verbose_name='是否已设价格')),
                ('actual_amount', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='总实收')),
                ('cache_seat', models.TextField(blank=True, editable=False, null=True, verbose_name='座位价格数据')),
                ('push_status', models.IntegerField(choices=[(1, '未推送'), (4, '已推送'), (2, '审核中'), (3, '审核完成'), (5, '推送创建商品失败'), (6, '审核失败')], default=1, verbose_name='推送抖音状态')),
                ('venue_id', models.IntegerField(default=0, editable=False, verbose_name='场馆ID')),
                ('product_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='抖音商品ID')),
                ('plan_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='通用计划ID')),
                ('fail_msg', models.TextField(blank=True, max_length=1000, null=True, verbose_name='抖音错误信息')),
                ('pull_mz_status', models.IntegerField(choices=[(1, '未拉取'), (2, '更新中'), (3, '已完成'), (4, '更新失败')], default=1, verbose_name='麦座同步状态')),
                ('is_new', models.BooleanField(default=False, editable=False, verbose_name='新任务')),
                ('maizuo_data', models.TextField(blank=True, null=True, verbose_name='麦座基础数据')),
                ('display_order', models.IntegerField(default=0, help_text='数字越大,商品越靠前', verbose_name='抖音商品排序')),
                ('express_template', models.ForeignKey(blank=True, help_text='选择物流模板', null=True, on_delete=django.db.models.deletion.SET_NULL, to='express.Template', verbose_name='邮费模板')),
                ('main_session', models.ForeignKey(blank=True, help_text='有座场次才能选为主场次', limit_choices_to=models.Q(has_seat=1), null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='m_session', to='ticket.SessionInfo', verbose_name='关联主场次')),
                ('mz_account', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='mp.MaiZuoAccount', verbose_name='麦座账户')),
            ],
            options={
                'verbose_name': '演出场次',
                'verbose_name_plural': '演出场次',
                'ordering': ['-start_at'],
            },
        ),
        migrations.CreateModel(
            name='SessionSeat',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('row', models.IntegerField(default=0, verbose_name='行数')),
                ('column', models.IntegerField(default=0, verbose_name='列数')),
                ('layers', models.IntegerField(default=1, verbose_name='层数')),
                ('price', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='售价')),
                ('color_code', models.CharField(blank=True, help_text='16进制色号', max_length=10, null=True, verbose_name='色号')),
                ('session_id', models.IntegerField(db_index=True, default=0, editable=False, verbose_name='场次ID')),
                ('color_id', models.IntegerField(default=0, editable=False, verbose_name='票档颜色ID')),
                ('showRow', models.CharField(blank=True, default=0, editable=False, max_length=10, null=True, verbose_name='座位排号')),
                ('showCol', models.CharField(blank=True, default=0, editable=False, max_length=10, null=True, verbose_name='座位列号')),
                ('box_no_special', models.CharField(blank=True, max_length=50, null=True, verbose_name='区域')),
                ('is_reserve', models.BooleanField(default=False, verbose_name='是否预留')),
                ('desc', models.CharField(blank=True, max_length=50, null=True, verbose_name='预留描述')),
                ('is_buy', models.BooleanField(default=False, verbose_name='是否被锁定')),
                ('order_no', models.CharField(blank=True, db_index=True, max_length=128, null=True, verbose_name='订单号')),
                ('version', models.IntegerField(default=0, editable=False, verbose_name='版本')),
                ('ticket_ids', models.CharField(blank=True, max_length=30, null=True, verbose_name='麦座座位号')),
                ('buy_desc', models.CharField(blank=True, max_length=50, null=True, verbose_name='购买描述')),
                ('start_index', models.PositiveIntegerField(default=0, editable=False, help_text='用于同步麦座', verbose_name='数据缓存开始索引')),
                ('end_index', models.PositiveIntegerField(default=0, editable=False, help_text='用于同步麦座', verbose_name='数据缓存结束始索引')),
                ('push_mz_lock', models.BooleanField(default=False, verbose_name='是否推送麦座锁座')),
                ('seats', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.Seat', verbose_name='座位')),
            ],
            options={
                'verbose_name': '演出场次座位',
                'verbose_name_plural': '演出场次座位',
            },
        ),
        migrations.CreateModel(
            name='ShowComment',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=60, null=True, verbose_name='演出名称')),
                ('start_at', models.DateTimeField(null=True, verbose_name='演出开演时间')),
                ('order_no', models.CharField(max_length=128, null=True, verbose_name='订单号')),
                ('mobile', models.CharField(max_length=20, null=True, verbose_name='手机')),
                ('content', models.TextField(max_length=200, verbose_name='内容')),
                ('status', models.IntegerField(choices=[(1, '待审核'), (2, '已审核'), (3, '未通过')], default=1, verbose_name='状态')),
                ('is_display', models.BooleanField(default=False, help_text='展示在演出', verbose_name='是否展示')),
                ('is_quality', models.BooleanField(default=False, verbose_name='是否优质评论')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('approve_at', models.DateTimeField(blank=True, null=True, verbose_name='审核时间')),
            ],
            options={
                'verbose_name': '演出评论',
                'verbose_name_plural': '演出评论',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='ShowCompany',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(help_text='50个字内', max_length=50, verbose_name='名称')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '合同主办方',
                'verbose_name_plural': '合同主办方',
            },
        ),
        migrations.CreateModel(
            name='ShowContentCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=20, verbose_name='分类名称')),
            ],
            options={
                'verbose_name': '内容分类',
                'verbose_name_plural': '内容分类',
            },
        ),
        migrations.CreateModel(
            name='ShowFlag',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=10, validators=[ticket.models.only_chinese], verbose_name='名称')),
                ('img', models.ImageField(blank=True, null=True, upload_to='images/ticket/show/flag', validators=[django.core.validators.validate_image_file_extension], verbose_name='标签图片')),
            ],
            options={
                'verbose_name': '演出标签',
                'verbose_name_plural': '演出标签',
            },
        ),
        migrations.CreateModel(
            name='ShowPerformer',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=10, verbose_name='姓名')),
                ('avatar', models.ImageField(upload_to='images/show/performer', validators=[ticket.models.file_size, django.core.validators.validate_image_file_extension], verbose_name='头像')),
                ('desc', models.TextField(max_length=500, verbose_name='演员简介')),
                ('focus_num', models.IntegerField(default=0, verbose_name='关注人数')),
                ('is_show', models.BooleanField(default=True, verbose_name='是否展示')),
                ('display_order', models.IntegerField(default=0, help_text='按从小到大排列', verbose_name='排序')),
                ('flag', models.ManyToManyField(blank=True, to='ticket.PerformerFlag', verbose_name='演员标签')),
            ],
            options={
                'verbose_name': '演员管理',
                'verbose_name_plural': '演员管理',
                'ordering': ['display_order', 'pk'],
            },
        ),
        migrations.CreateModel(
            name='ShowProject',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('no', models.CharField(db_index=True, default=common.utils.get_no, max_length=64, null=True, unique=True, verbose_name='编号')),
                ('title', models.CharField(help_text='60个字内', max_length=60, verbose_name='演出名称')),
                ('lat', models.FloatField(default=0, help_text='场馆纬度', verbose_name='纬度')),
                ('lng', models.FloatField(default=0, help_text='场馆经度', verbose_name='经度')),
                ('city_id', models.IntegerField(default=0, editable=False, verbose_name='城市ID')),
                ('seat_type', models.SmallIntegerField(choices=[(1, '有座')], default=1, editable=False, verbose_name='座位类型')),
                ('logo_mobile', models.ImageField(upload_to='images/ticket/shows', validators=[ticket.models.file_size, django.core.validators.validate_image_file_extension], verbose_name='宣传海报')),
                ('sale_time', models.DateTimeField(verbose_name='开售时间')),
                ('dy_show_date', models.CharField(help_text='抖音用例如2024-01-01至2024-06-30', max_length=100, null=True, verbose_name='本地演出日期')),
                ('origin_amount', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='抖音原价')),
                ('price', models.DecimalField(decimal_places=2, default=0, help_text='实际支付价格,用于展示和排序', max_digits=13, verbose_name='最低价格')),
                ('name_limit_num', models.IntegerField(default=1, editable=False, help_text='实名制售票', verbose_name='每个证件限购数量')),
                ('order_limit_num', models.IntegerField(default=1, editable=False, help_text='购票限制，0表示不限购', verbose_name='每个订单限购数量')),
                ('qualification_identity', models.SmallIntegerField(choices=[(0, ''), (1, '主办方'), (2, '票务代理')], default=0, verbose_name='商家资质身份')),
                ('content', models.TextField(null=True, verbose_name='演出介绍')),
                ('notice', models.TextField(verbose_name='购票须知')),
                ('other_notice', models.TextField(blank=True, help_text='抖音商品使用', null=True, verbose_name='其他说明信息')),
                ('special_desc', models.TextField(blank=True, editable=False, null=True, verbose_name='购票特殊说明')),
                ('buy_tips', models.BooleanField(default=False, editable=False, verbose_name='购买时弹窗提醒')),
                ('status', models.IntegerField(choices=[(1, '上架'), (0, '下架')], default=0, verbose_name='状态')),
                ('is_recommend', models.BooleanField(default=True, verbose_name='近期演出')),
                ('display_order', models.PositiveIntegerField(default=0, help_text='越大越排前', verbose_name='排序')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('session_end_at', models.DateTimeField(blank=True, db_index=True, editable=False, null=True, verbose_name='场次最后结束时间')),
                ('version', models.IntegerField(default=0, verbose_name='版本号')),
                ('is_test', models.BooleanField(default=False, verbose_name='是否测试商品')),
                ('tiktok_code', models.ImageField(blank=True, null=True, upload_to='images/ticket/project', validators=[django.core.validators.validate_image_file_extension], verbose_name='抖音分享二维码')),
                ('wxa_code', models.ImageField(blank=True, null=True, upload_to='images/ticket/project', validators=[django.core.validators.validate_image_file_extension], verbose_name='小程序分享二维码')),
                ('cate', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ticket.ShowContentCategory', verbose_name='内容分类')),
                ('dy_pay_config', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='mp.DouYinPayConfig', verbose_name='抖音支付商户')),
                ('flag', models.ManyToManyField(blank=True, to='ticket.ShowFlag', verbose_name='标签')),
            ],
            options={
                'verbose_name': '演出项目',
                'verbose_name_plural': '演出项目',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='ShowSecondaryCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category_id', models.CharField(help_text='抖音类目ID', max_length=10, null=True, unique=True, verbose_name='类目ID')),
                ('name', models.CharField(max_length=20, verbose_name='类目名称')),
                ('enable', models.BooleanField(default=True, verbose_name='类目是否开放')),
                ('goods_template', models.TextField(blank=True, null=True, verbose_name='商品模板结构')),
            ],
            options={
                'verbose_name': '二级分类',
                'verbose_name_plural': '二级分类',
            },
        ),
        migrations.CreateModel(
            name='ShowTopCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category_id', models.CharField(help_text='抖音类目ID', max_length=10, null=True, unique=True, verbose_name='类目ID')),
                ('name', models.CharField(max_length=20, verbose_name='类目名称')),
                ('enable', models.BooleanField(default=True, verbose_name='类目是否开放')),
                ('goods_template', models.TextField(blank=True, null=True, verbose_name='商品模板结构')),
            ],
            options={
                'verbose_name': '抖音类目',
                'verbose_name_plural': '抖音类目',
            },
        ),
        migrations.CreateModel(
            name='TicketBooking',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.IntegerField(choices=[(1, '未预约'), (3, '已预约'), (2, '已取消'), (4, '预约失败')], default=1, verbose_name='状态')),
                ('order_no', models.CharField(max_length=128, verbose_name='关联订单号')),
                ('tiktok_order_id', models.CharField(max_length=128, verbose_name='抖音订单号')),
                ('out_book_no', models.CharField(db_index=True, default=ticket.models.randomstrwithdatetime_booking, max_length=100, unique=True, verbose_name='预约单号')),
                ('book_id', models.CharField(blank=True, max_length=64, null=True, verbose_name='抖音预约单号')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('cancel_at', models.DateTimeField(blank=True, null=True, verbose_name='取消时间')),
                ('cancel_reason', models.CharField(blank=True, max_length=100, null=True, verbose_name='取消理由')),
                ('err_msg', models.CharField(blank=True, max_length=100, null=True, verbose_name='预约返回信息')),
                ('err_logid', models.CharField(blank=True, max_length=50, null=True, verbose_name='抖音订单号')),
            ],
            options={
                'verbose_name': '抖音预约单',
                'verbose_name_plural': '抖音预约单',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TicketColor',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=10, verbose_name='名称')),
                ('code', models.CharField(help_text='16进制色号', max_length=10, verbose_name='色号')),
                ('is_use', models.BooleanField(default=False, verbose_name='是否使用')),
            ],
            options={
                'verbose_name': '票档颜色',
                'verbose_name_plural': '票档颜色',
            },
        ),
        migrations.CreateModel(
            name='TicketOrder',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('u_user_id', models.IntegerField(default=0, verbose_name='用户id')),
                ('u_agent_id', models.IntegerField(default=0, verbose_name='代理id')),
                ('title', models.CharField(max_length=60, verbose_name='演出名称')),
                ('name', models.CharField(max_length=20, null=True, verbose_name='姓名')),
                ('mobile', models.CharField(max_length=20, null=True, verbose_name='手机号')),
                ('id_card', models.CharField(blank=True, max_length=20, null=True, verbose_name='身份证号')),
                ('express_address', models.CharField(blank=True, max_length=200, null=True, verbose_name='送货地址')),
                ('order_no', models.CharField(db_index=True, default=mall.utils.randomstrwithdatetime, max_length=128, unique=True, verbose_name='订单号')),
                ('tiktok_order_id', models.CharField(blank=True, db_index=True, max_length=128, null=True, unique=True, verbose_name='抖音订单号')),
                ('ks_order_no', models.CharField(blank=True, db_index=True, max_length=128, null=True, unique=True, verbose_name='快手订单号')),
                ('multiply', models.IntegerField(validators=[mall.models.validate_positive_int_gen], verbose_name='数量')),
                ('amount', models.DecimalField(decimal_places=2, max_digits=13, verbose_name='订单总价')),
                ('actual_amount', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='实付金额')),
                ('discount_amount', models.DecimalField(decimal_places=2, default=0, editable=False, max_digits=9, verbose_name='折扣金额')),
                ('express_fee', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='邮费')),
                ('card_jc_amount', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='剧场会员卡支付数额')),
                ('discount_type', models.IntegerField(choices=[(0, '无'), (1, '年度会员卡'), (2, '剧场会员卡')], default=0, verbose_name='优惠会员卡类型')),
                ('refund_amount', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='已退款金额')),
                ('order_type', models.SmallIntegerField(choices=[(1, '有座订单'), (2, '无座订单'), (3, '补差订单')], default=1, verbose_name='订单类型')),
                ('status', models.IntegerField(choices=[(1, '未付款'), (2, '待核销'), (4, '已完成'), (3, '已取消'), (5, '退款中'), (6, '已退款'), (8, '退款失败'), (7, '付款超时(请联系客服)')], default=1, verbose_name='状态')),
                ('express_status', models.IntegerField(choices=[(1, '无需发货'), (2, '待发货'), (3, '待收货'), (4, '已完成')], default=1, verbose_name='发货状态')),
                ('over_express_time', models.BooleanField(default=False, verbose_name='是否已过邮寄时间')),
                ('source_type', models.IntegerField(choices=[(0, '无'), (1, '短视频'), (2, '直播间'), (3, '非cps订单')], default=0, verbose_name='带货场景')),
                ('tiktok_nickname', models.CharField(blank=True, max_length=50, null=True, verbose_name='达人抖音昵称')),
                ('tiktok_douyinid', models.CharField(blank=True, max_length=50, null=True, verbose_name='达人抖音/快手号')),
                ('tiktok_commission_amount', models.DecimalField(decimal_places=2, default=0, max_digits=9, verbose_name='达人佣金')),
                ('plan_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='计划ID')),
                ('is_cancel_pay', models.BooleanField(default=False, verbose_name='是否订单自动取消后付款')),
                ('tiktok_refund_type', models.IntegerField(choices=[(0, '无'), (1, '用户发起退款'), (2, '开放者发起退款'), (3, '过期自动退款'), (4, '抖音客服退款'), (5, '预约失败自动退款')], default=0, verbose_name='抖音退款类型')),
                ('status_before_refund', models.PositiveSmallIntegerField(choices=[(2, '待核销'), (6, '已退款')], default=1, editable=False, verbose_name='退款前状态')),
                ('pay_type', models.SmallIntegerField(choices=[(-1, '空'), (7, '微信小程序支付'), (8, '抖音小程序支付'), (9, '剧场会员卡余额'), (10, '快手小程序支付'), (11, '小红书小程序支付')], default=-1, verbose_name='付款类型')),
                ('pay_at', models.DateTimeField(blank=True, null=True, verbose_name='支付时间')),
                ('deliver_at', models.DateTimeField(blank=True, null=True, verbose_name='发货时间')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='下单时间')),
                ('start_at', models.DateTimeField(blank=True, null=True, verbose_name='演出开场时间')),
                ('end_at', models.DateTimeField(blank=True, null=True, verbose_name='演出结束时间')),
                ('snapshot', models.TextField(blank=True, editable=False, help_text='下单时保存的快照', max_length=2048, null=True, verbose_name='场次演出快照')),
                ('item_order_info_list', models.TextField(blank=True, null=True, verbose_name='抖音下单明细')),
                ('push_message', models.BooleanField(default=False, verbose_name='是否已推送开场2小时前短信')),
                ('push_message_day', models.BooleanField(default=False, verbose_name='是否已推送开场24小时前短信')),
                ('is_check_num', models.IntegerField(default=0, verbose_name='已核验数量')),
                ('is_low_buy', models.BooleanField(default=False, verbose_name='是否0.01购票')),
                ('is_comment', models.BooleanField(default=False, verbose_name='是否已经评论')),
                ('is_paper', models.BooleanField(default=False, verbose_name='是否纸质票场次')),
                ('is_lock_seat', models.BooleanField(default=False, verbose_name='是否已手动出票')),
                ('express_no', models.CharField(blank=True, help_text='物流单号', max_length=30, null=True, verbose_name='快递单号')),
                ('express_name', models.CharField(blank=True, help_text='物流公司名称', max_length=30, null=True, verbose_name='快递公司')),
                ('express_comp_no', models.CharField(blank=True, help_text='物流公司名称', max_length=30, null=True, verbose_name='快递公司编码')),
                ('auto_check', models.IntegerField(choices=[(0, ''), (1, '成功'), (2, '失败')], default=0, verbose_name='抖音/小红书自动核销状态')),
                ('booking_at', models.DateTimeField(blank=True, editable=False, null=True, verbose_name='补单时间')),
                ('need_refund_mz', models.BooleanField(default=False, verbose_name='同步卖座是否需要退款')),
                ('transaction_id', models.CharField(blank=True, max_length=32, null=True, verbose_name='微信(抖音)支付单号')),
                ('ks_report', models.IntegerField(choices=[(0, ''), (1, '成功'), (2, '失败')], default=0, verbose_name='快手推送核销状态')),
                ('agent', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='agent', to=settings.AUTH_USER_MODEL, verbose_name='推荐人(代理)')),
                ('dy_pay_config', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='mp.DouYinPayConfig', verbose_name='抖音支付商户')),
                ('receipt', models.OneToOneField(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='ticket_order', to='mall.Receipt', verbose_name='收款信息')),
                ('session', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='场次')),
                ('source_order', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='sr_order', to='ticket.TicketOrder', verbose_name='来源订单')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='用户')),
            ],
            options={
                'verbose_name': '订单',
                'verbose_name_plural': '订单',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TikTokQualRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('qual_type_name', models.CharField(max_length=50, null=True, verbose_name='资质类型名称')),
                ('qualification_id', models.CharField(max_length=20, unique=True, verbose_name='资质ID')),
                ('qualification_type', models.IntegerField(choices=[(5005, '演出主办⽅授权书'), (5006, '营业性演出准予许可决定')], default=5005, verbose_name='资质类型')),
                ('status', models.IntegerField(choices=[(2, '审核中'), (3, '审核通过'), (4, '审核拒绝')], default=2, verbose_name='资质状态')),
                ('effective_date', models.CharField(help_text='永久/无期限的情况下传 9999-12-31', max_length=30, null=True, verbose_name='有效期')),
                ('status_changed_time', models.DateTimeField(blank=True, null=True, verbose_name='状态变更时间')),
                ('create_time', models.DateTimeField(blank=True, null=True, verbose_name='创建时间')),
                ('life_account_id', models.CharField(max_length=20, null=True, verbose_name='资质对应账户id')),
                ('qual_category', models.IntegerField(null=True, verbose_name='资质类目')),
            ],
            options={
                'verbose_name': '抖音资质记录',
                'verbose_name_plural': '抖音资质记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TiktokUser',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=50, verbose_name='账号昵称')),
                ('source_type', models.IntegerField(choices=[(1, '抖音'), (2, '快手'), (3, '微信视频号')], default=1, verbose_name='平台')),
                ('tiktok_no', models.CharField(help_text='团购带货达人的平台账号号ID', max_length=50, verbose_name='平台账号ID')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '团购带货达人管理',
                'verbose_name_plural': '团购带货达人管理',
            },
        ),
        migrations.CreateModel(
            name='Venues',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('no', models.CharField(db_index=True, default=common.utils.get_no, max_length=64, null=True, unique=True, verbose_name='编号')),
                ('name', models.CharField(help_text='50个字内', max_length=50, verbose_name='场馆名称')),
                ('layers', models.IntegerField(default=1, verbose_name='层数')),
                ('lat', models.FloatField(default=0, verbose_name='纬度')),
                ('lng', models.FloatField(default=0, verbose_name='经度')),
                ('address', models.CharField(max_length=200, verbose_name='详细地址')),
                ('desc', models.TextField(null=True, verbose_name='详情描述')),
                ('map', models.ImageField(blank=True, null=True, upload_to='images/ticket/venues', validators=[django.core.validators.validate_image_file_extension], verbose_name='剧场分区图')),
                ('is_use', models.BooleanField(default=True, verbose_name='是否启用')),
                ('custom_mobile', models.CharField(blank=True, max_length=20, null=True, verbose_name='客服电话')),
                ('custom_wechat', models.CharField(blank=True, max_length=50, null=True, verbose_name='客服微信号')),
                ('custom_code', models.ImageField(blank=True, null=True, upload_to='images/ticket/venues', validators=[django.core.validators.validate_image_file_extension], verbose_name='客服微信二维码')),
                ('display_order', models.IntegerField(default=0, help_text='越小排越前', verbose_name='排序')),
                ('is_seat', models.BooleanField(default=False, verbose_name='是否已设座位')),
                ('seat_data', models.TextField(blank=True, editable=False, null=True, verbose_name='座位数据')),
                ('direction', models.IntegerField(choices=[(1, '正向'), (2, '反向')], default=1, verbose_name='舞台方向')),
                ('city', models.ForeignKey(limit_choices_to=models.Q(type=1), null=True, on_delete=django.db.models.deletion.SET_NULL, to='express.Division', verbose_name='城市')),
            ],
            options={
                'verbose_name': '演出场馆',
                'verbose_name_plural': '演出场馆',
                'ordering': ['display_order'],
            },
        ),
        migrations.CreateModel(
            name='TicketReceipt',
            fields=[
            ],
            options={
                'verbose_name': '收款记录',
                'verbose_name_plural': '收款记录',
                'ordering': ['-pk'],
                'proxy': True,
                'indexes': [],
                'constraints': [],
            },
            bases=('mall.receipt',),
        ),
        migrations.CreateModel(
            name='VenuesLogoImage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(upload_to='images/mall/logo/venues', validators=[ticket.models.file_size, django.core.validators.validate_image_file_extension], verbose_name='图片')),
                ('venue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='场馆')),
            ],
            options={
                'verbose_name': '场馆封面图',
                'verbose_name_plural': '场馆封面图',
            },
        ),
        migrations.CreateModel(
            name='VenuesDetailImage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(upload_to='images/mall/detail/venues', validators=[django.core.validators.validate_image_file_extension], verbose_name='图片')),
                ('venue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='场馆')),
            ],
            options={
                'verbose_name': '场馆详情图',
                'verbose_name_plural': '场馆详情图',
            },
        ),
        migrations.CreateModel(
            name='TicketUserCode',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('level_id', models.IntegerField(default=0, editable=False, verbose_name='票档ID')),
                ('product_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='抖音商品ID')),
                ('price', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='售价')),
                ('session_id', models.IntegerField(db_index=True, default=0, editable=False, verbose_name='场次ID')),
                ('status', models.IntegerField(choices=[(1, '未检票'), (2, '已检票'), (3, '已过期'), (4, '已作废')], default=1, verbose_name='检票状态')),
                ('source_type', models.IntegerField(choices=[(0, '无'), (1, '短视频'), (2, '直播间'), (3, '非cps订单')], default=0, verbose_name='带货场景')),
                ('code', models.CharField(db_index=True, max_length=30, null=True, verbose_name='检票码')),
                ('code_img', models.ImageField(blank=True, null=True, upload_to='images/ticket/code', validators=[django.core.validators.validate_image_file_extension], verbose_name='检票二维码')),
                ('check_at', models.DateTimeField(blank=True, null=True, verbose_name='检票时间')),
                ('snapshot', models.TextField(blank=True, editable=False, help_text='下单时保存的场次座位快照', max_length=2048, null=True, verbose_name='场次座位快照')),
                ('tiktok_check', models.BooleanField(default=False, verbose_name='是否推送抖音核销')),
                ('push_at', models.DateTimeField(blank=True, null=True, verbose_name='核销时间')),
                ('msg', models.CharField(blank=True, max_length=100, null=True, verbose_name='核销返回')),
                ('create_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='创建时间')),
                ('give_status', models.SmallIntegerField(choices=[(0, '未赠送'), (1, '待领取'), (2, '已领取')], default=0, verbose_name='赠送状态')),
                ('give_mobile', models.CharField(blank=True, max_length=20, null=True, verbose_name='受赠人手机号')),
                ('give_id', models.IntegerField(default=0, editable=False, verbose_name='门票赠送记录ID')),
                ('check_user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='shopping_points.UserAccount', verbose_name='验票员')),
                ('order', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='user_code', to='ticket.TicketOrder', verbose_name='订单')),
                ('session_seat', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionSeat', verbose_name='演出场次座位')),
            ],
            options={
                'verbose_name': '演出票(座位)信息',
                'verbose_name_plural': '演出票(座位)信息',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TicketOrderRefund',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.IntegerField(choices=[(1, '待退款'), (2, '退款支付中'), (3, '退款支付失败'), (4, '已完成'), (5, '已取消')], default=1, verbose_name='状态')),
                ('source_type', models.IntegerField(choices=[(1, '微信退款'), (2, '抖音退款'), (3, '剧场卡订单退款'), (4, '快手退款'), (5, '小红书退款')], default=1, verbose_name='退款类型')),
                ('out_refund_no', models.CharField(db_index=True, default=ticket.models.randomstrwithdatetime_refund, max_length=100, unique=True, verbose_name='退款单号')),
                ('refund_amount', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='退款金额')),
                ('theater_amount', models.DecimalField(decimal_places=2, default=0, help_text='仅用剧场卡支付有效', max_digits=13, verbose_name='剧场卡订单退款数额')),
                ('amount', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='实退金额')),
                ('return_reason', models.CharField(max_length=100, verbose_name='退款原因')),
                ('error_msg', models.CharField(blank=True, max_length=1000, null=True, verbose_name='退款返回信息')),
                ('transaction_id', models.CharField(blank=True, help_text='收据里的', max_length=32, null=True, verbose_name='支付订单号')),
                ('refund_id', models.CharField(blank=True, max_length=32, null=True, verbose_name='退款方退款单号')),
                ('return_code', models.CharField(blank=True, max_length=20, null=True, verbose_name='微信通信结果')),
                ('result_code', models.CharField(blank=True, max_length=20, null=True, verbose_name='微信返回结果')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('confirm_at', models.DateTimeField(blank=True, null=True, verbose_name='确认时间')),
                ('finish_at', models.DateTimeField(blank=True, null=True, verbose_name='完成时间')),
                ('op_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='op_user', to=settings.AUTH_USER_MODEL, verbose_name='操作人员')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='ticket_refund_apply', to='ticket.TicketOrder', verbose_name='退款订单')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户')),
            ],
            options={
                'verbose_name': '退款记录',
                'verbose_name_plural': '退款记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TicketOrderExpress',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(help_text='上传回传物流单号的发货单文件，表格字段要求和导出的发货单保持一致！注意!仅支持xlsx格式!', upload_to='files/ticket/order_express/%Y/%m/%d', validators=[django.core.validators.FileExtensionValidator(allowed_extensions=['xlsx'])], verbose_name='发货回执单')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('desp', models.CharField(blank=True, max_length=100, null=True, verbose_name='备注')),
                ('error_msg', models.TextField(blank=True, null=True, verbose_name='导入错误信息')),
                ('user', models.ForeignKey(blank=True, editable=False, null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='操作人')),
            ],
            options={
                'verbose_name': '发货回执记录',
                'verbose_name_plural': '发货回执记录',
                'ordering': ['-create_at'],
            },
        ),
        migrations.CreateModel(
            name='TicketOrderChangePrice',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('before_amount', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='修改前实付金额')),
                ('after_amount', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='修改后实付金额')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='修改时间')),
                ('order', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketOrder', verbose_name='订单')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='修改用户')),
            ],
            options={
                'verbose_name': '订单改价记录',
                'verbose_name_plural': '订单改价记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.AddField(
            model_name='ticketorder',
            name='venue',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='演出场馆'),
        ),
        migrations.AddField(
            model_name='ticketorder',
            name='wx_pay_config',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='mp.WeiXinPayConfig', verbose_name='微信支付'),
        ),
        migrations.CreateModel(
            name='TicketGiveRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('no', models.CharField(db_index=True, default=common.utils.get_no, max_length=64, null=True, unique=True, verbose_name='编号')),
                ('mobile', models.CharField(max_length=20, verbose_name='赠送人手机号')),
                ('give_mobile', models.CharField(max_length=20, verbose_name='受赠人手机号')),
                ('status', models.SmallIntegerField(choices=[(1, '待领取'), (2, '已领取'), (3, '已失效')], default=1, verbose_name='状态')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='赠送时间')),
                ('cancel_at', models.DateTimeField(blank=True, null=True, verbose_name='取消时间')),
                ('receive_at', models.DateTimeField(blank=True, null=True, verbose_name='领取时间')),
                ('push_message', models.BooleanField(default=False, editable=False, verbose_name='是否已推送开场2小时前短信')),
                ('push_message_day', models.BooleanField(default=False, editable=False, verbose_name='是否已推送开场24小时前短信')),
                ('order', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='give_order', to='ticket.TicketOrder', verbose_name='订单')),
                ('receive_user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='receive_user', to=settings.AUTH_USER_MODEL, verbose_name='领取用户')),
                ('session', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='场次')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='操作用户')),
            ],
            options={
                'verbose_name': '门票赠送记录',
                'verbose_name_plural': '门票赠送记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='TicketFile',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(blank=True, help_text='60个字内', max_length=60, null=True, verbose_name='演出名称')),
                ('origin_price', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='票档')),
                ('price', models.DecimalField(decimal_places=2, default=0, max_digits=13, verbose_name='售价')),
                ('total_stock', models.PositiveIntegerField(default=0, editable=False, verbose_name='总数量')),
                ('stock', models.PositiveIntegerField(default=0, verbose_name='库存数量')),
                ('sales', models.PositiveIntegerField(default=0, verbose_name='销量')),
                ('lock_stock', models.BooleanField(default=False, editable=False, verbose_name='无限库存')),
                ('limit_num', models.PositiveIntegerField(default=0, editable=False, verbose_name='每单限购份数')),
                ('desc', models.CharField(blank=True, max_length=20, null=True, verbose_name='票档描述')),
                ('product_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='抖音商品ID')),
                ('plan_id', models.CharField(blank=True, max_length=50, null=True, verbose_name='通用计划ID')),
                ('version', models.IntegerField(default=0, editable=False, verbose_name='版本')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('is_tiktok', models.BooleanField(default=False, verbose_name='是否推送到抖音')),
                ('is_ks', models.BooleanField(default=False, verbose_name='是否推送到快手')),
                ('is_xhs', models.BooleanField(default=False, verbose_name='是否推送到小红书')),
                ('push_xhs', models.BooleanField(default=False, verbose_name='是否已经推送小红书')),
                ('status', models.BooleanField(default=True, verbose_name='是否上架')),
                ('push_status', models.IntegerField(choices=[(1, '未推送'), (2, '推送失败'), (3, '审核中'), (4, '审核成功'), (5, '审核失败')], default=1, editable=False, verbose_name='推送抖音状态')),
                ('fail_msg', models.TextField(blank=True, editable=False, max_length=1000, null=True, verbose_name='抖音错误信息')),
                ('can_cps', models.BooleanField(default=False, editable=False, verbose_name='是否cps选择')),
                ('color', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketColor', verbose_name='票档颜色')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='session_level', to='ticket.SessionInfo', verbose_name='场次')),
            ],
            options={
                'verbose_name': '票档',
                'verbose_name_plural': '票档',
                'unique_together': {('session', 'color')},
            },
        ),
        migrations.CreateModel(
            name='TicketBookingItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('goods_id', models.CharField(max_length=50, verbose_name='商品id')),
                ('ext_shopid', models.IntegerField(verbose_name='预约门店的外部店铺id')),
                ('poi_id', models.CharField(max_length=50, verbose_name='预约门店的poiId')),
                ('shop_name', models.CharField(max_length=100, verbose_name='预约门店的名称')),
                ('book_start_time', models.DateTimeField(verbose_name='预订的开始时间')),
                ('book_end_time', models.DateTimeField(verbose_name='预订结束时间')),
                ('sku_info', models.TextField(blank=True, null=True, verbose_name='留资信息')),
                ('user_info', models.TextField(blank=True, null=True, verbose_name='预约商品信息')),
                ('booking', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketBooking', verbose_name='抖音预约单')),
            ],
            options={
                'verbose_name': '预约信息',
                'verbose_name_plural': '预约信息',
                'ordering': ['-pk'],
            },
        ),
        migrations.AddField(
            model_name='ticketbooking',
            name='order',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='ticket.TicketOrder', verbose_name='关联订单'),
        ),
        migrations.AddField(
            model_name='ticketbooking',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户'),
        ),
        migrations.CreateModel(
            name='ShowType',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=20, verbose_name='演出类型名称')),
                ('source_type', models.SmallIntegerField(choices=[(1, '音乐'), (2, '戏剧'), (3, '曲艺'), (4, '舞蹈'), (5, '杂技'), (6, '展览'), (7, '赛事'), (8, '其他')], default=1, verbose_name='演出行业标准分类')),
                ('is_use', models.BooleanField(default=True, verbose_name='是否启用')),
                ('slug', models.CharField(blank=True, max_length=15, null=True, verbose_name='标识')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, related_name='cate', to='ticket.ShowTopCategory', verbose_name='抖音类目')),
            ],
            options={
                'verbose_name': '演出类型',
                'verbose_name_plural': '演出类型',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='ShowThirdCategory',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category_id', models.CharField(help_text='抖音类目ID', max_length=10, null=True, unique=True, verbose_name='类目ID')),
                ('name', models.CharField(max_length=20, verbose_name='类目名称')),
                ('enable', models.BooleanField(default=True, verbose_name='类目是否开放')),
                ('goods_template', models.TextField(blank=True, null=True, verbose_name='商品模板结构')),
                ('second', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='secondary', to='ticket.ShowSecondaryCategory', verbose_name='二级分类')),
            ],
            options={
                'verbose_name': '三级分类',
                'verbose_name_plural': '三级分类',
            },
        ),
        migrations.AddField(
            model_name='showsecondarycategory',
            name='superior',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='secondary', to='ticket.ShowTopCategory', verbose_name='一级分类'),
        ),
        migrations.CreateModel(
            name='ShowsDetailImage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('image', models.ImageField(upload_to='images/ticket/shows/detail', validators=[ticket.models.file_size, django.core.validators.validate_image_file_extension], verbose_name='图片')),
                ('show', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowProject', verbose_name='演出')),
            ],
            options={
                'verbose_name': '演出详情图',
                'verbose_name_plural': '演出详情图',
            },
        ),
        migrations.AddField(
            model_name='showproject',
            name='host_approval_qual',
            field=models.ManyToManyField(blank=True, help_text='主办方和票务代理,要传“营业性演出准予许可决定”5006', limit_choices_to=models.Q(qualification_type=5006), related_name='_showproject_host_approval_qual_+', to='ticket.TikTokQualRecord', verbose_name='营业性演出准予许可决定'),
        ),
        migrations.AddField(
            model_name='showproject',
            name='performer',
            field=models.ManyToManyField(blank=True, to='ticket.ShowPerformer', verbose_name='演员'),
        ),
        migrations.AddField(
            model_name='showproject',
            name='show_type',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowType', verbose_name='演出类型'),
        ),
        migrations.AddField(
            model_name='showproject',
            name='ticket_agent_qual',
            field=models.ManyToManyField(blank=True, help_text='票务代理,要传“演出主办方授权书” 5005', limit_choices_to=models.Q(qualification_type=5005), related_name='_showproject_ticket_agent_qual_+', to='ticket.TikTokQualRecord', verbose_name='演出主办方授权书'),
        ),
        migrations.AddField(
            model_name='showproject',
            name='venues',
            field=models.ForeignKey(help_text='提交后不可修改', on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='演出场馆'),
        ),
        migrations.AddField(
            model_name='showproject',
            name='wx_pay_config',
            field=models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.SET_NULL, to='mp.WeiXinPayConfig', verbose_name='微信支付'),
        ),
        migrations.CreateModel(
            name='ShowPerformerBanner',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('img', models.ImageField(upload_to='images/show/performer', validators=[ticket.models.validate_file_size, django.core.validators.validate_image_file_extension], verbose_name='海报')),
                ('is_show', models.BooleanField(default=True, verbose_name='是否展示')),
                ('display_order', models.IntegerField(default=0, help_text='按从小到大排列', verbose_name='排序')),
                ('performer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowPerformer', verbose_name='演员')),
            ],
            options={
                'verbose_name': '形象海报',
                'verbose_name_plural': '形象海报',
                'ordering': ['-display_order'],
            },
        ),
        migrations.CreateModel(
            name='ShowNotification',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(help_text='20字以内', max_length=20, verbose_name='标题')),
                ('content', models.TextField(help_text='200字以内', verbose_name='内容')),
                ('show', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notification', to='ticket.ShowProject', verbose_name='项目')),
            ],
            options={
                'verbose_name': '抖音商品使用规则',
                'verbose_name_plural': '抖音商品使用规则',
            },
        ),
        migrations.CreateModel(
            name='ShowCommentImage',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('user_id', models.PositiveIntegerField(verbose_name='用户ID')),
                ('image', models.ImageField(upload_to='images/ticket/comment', validators=[django.core.validators.validate_image_file_extension], verbose_name='附件图片')),
                ('record', models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowComment', verbose_name='演出评论')),
            ],
            options={
                'verbose_name': '演出评论图片',
                'verbose_name_plural': '演出评论图片',
            },
        ),
        migrations.AddField(
            model_name='showcomment',
            name='order',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketOrder', verbose_name='订单'),
        ),
        migrations.AddField(
            model_name='showcomment',
            name='show',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowProject', verbose_name='演出项目'),
        ),
        migrations.AddField(
            model_name='showcomment',
            name='user',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户'),
        ),
        migrations.CreateModel(
            name='ShortVideoCps',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('plan_name', models.CharField(max_length=20, verbose_name='计划名称')),
                ('plan_id', models.CharField(blank=True, editable=False, max_length=50, null=True, verbose_name='计划ID')),
                ('merchant_phone', models.CharField(max_length=11, verbose_name='计划联系人手机号码')),
                ('status', models.IntegerField(choices=[(0, '待推送'), (5, '推送中'), (1, '进行中'), (2, '已完成'), (3, '已取消'), (4, '推送失败')], default=0, help_text='当短视频定向佣金计划开始时间小于当前时间时，不支持取消', verbose_name='状态')),
                ('error_msg', models.CharField(blank=True, editable=False, max_length=300, null=True, verbose_name='推送信息')),
                ('create_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='创建时间')),
                ('start_time', models.DateTimeField(help_text='必须大于当前时间，如果修改必须小于旧的开始时间', verbose_name='可上传投稿视频的开始时间')),
                ('end_time', models.DateTimeField(help_text='必须大于开始时间，如果修改必须大于旧的结束时间', verbose_name='可上传投稿视频的结束时间')),
                ('commission_duration', models.IntegerField(default=1, help_text='单位是天,不可修改', verbose_name='佣金有效期')),
                ('change_start', models.BooleanField(default=False, editable=False, verbose_name='是否修改开始时间')),
                ('change_end', models.BooleanField(default=False, editable=False, verbose_name='是否修改结束时间')),
                ('tiktok_users', models.ManyToManyField(blank=True, help_text='出于安全考虑，请求参数中含有“非团购带货达人的抖音号ID”会被视为异常，异常请求当天超过50次，则禁止应用当日再调用本接口。最多200个', related_name='_shortvideocps_tiktok_users_+', to='ticket.TiktokUser', verbose_name='已选择定向达人')),
                ('tiktok_users_add', models.ManyToManyField(blank=True, help_text='出于安全考虑，请求参数中含有“非团购带货达人的抖音号ID”会被视为异常，异常请求当天超过50次，则禁止应用当日再调用本接口', related_name='_shortvideocps_tiktok_users_add_+', to='ticket.TiktokUser', verbose_name='增加定向达人')),
                ('tiktok_users_delete', models.ManyToManyField(blank=True, help_text='仅当满足以下两个条件时，开发者才能取消达人：达人未发布视频当前时间 < 视频发布时间-1day。', related_name='_shortvideocps_tiktok_users_delete_+', to='ticket.TiktokUser', verbose_name='取消定向达人')),
            ],
            options={
                'verbose_name': '短视频定向佣金计划',
                'verbose_name_plural': '短视频定向佣金计划',
                'ordering': ['-pk'],
            },
        ),
        migrations.AddField(
            model_name='sessionseat',
            name='ticket_level',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketFile', verbose_name='票档'),
        ),
        migrations.CreateModel(
            name='SessionPushTiktokTask',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.IntegerField(choices=[(1, '未推送'), (2, '推送中'), (3, '已完成'), (4, '推送失败')], default=1, verbose_name='状态')),
                ('error_msg', models.CharField(blank=True, max_length=200, null=True, verbose_name='错误信息')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('msg', models.CharField(blank=True, max_length=200, null=True, verbose_name='推送描述')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='用户')),
            ],
            options={
                'verbose_name': '演出推送抖音商品记录',
                'verbose_name_plural': '演出推送抖音商品记录',
            },
        ),
        migrations.AddField(
            model_name='sessioninfo',
            name='show',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='session_info', to='ticket.ShowProject', verbose_name='项目'),
        ),
        migrations.AddField(
            model_name='sessioninfo',
            name='tiktok_store',
            field=models.ForeignKey(blank=True, help_text='推送商品到抖音必填', null=True, on_delete=django.db.models.deletion.SET_NULL, to='ticket.DouYinStore', verbose_name='抖音店铺'),
        ),
        migrations.CreateModel(
            name='SessionChangeSaleTimeRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('old_sale_time', models.DateTimeField(blank=True, null=True, verbose_name='旧开售时间')),
                ('new_sale_time', models.DateTimeField(blank=True, null=True, verbose_name='新开售时间')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='场次')),
            ],
            options={
                'verbose_name': '抖音开售时间修改记录',
                'verbose_name_plural': '抖音开售时间修改记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='SessionChangeRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('old_start_at', models.DateTimeField(blank=True, null=True, verbose_name='旧开始时间')),
                ('new_start_at', models.DateTimeField(blank=True, null=True, verbose_name='新开始时间')),
                ('old_end_at', models.DateTimeField(blank=True, null=True, verbose_name='旧结束时间')),
                ('new_end_at', models.DateTimeField(blank=True, null=True, verbose_name='新结束时间')),
                ('create_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='操作时间')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='场次')),
                ('user', models.ForeignKey(null=True, on_delete=django.db.models.deletion.SET_NULL, to=settings.AUTH_USER_MODEL, verbose_name='操作用户')),
            ],
            options={
                'verbose_name': '场次时间延长记录',
                'verbose_name_plural': '场次时间延长记录',
                'ordering': ['-pk'],
            },
        ),
        migrations.AddField(
            model_name='seat',
            name='venue',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='演出场馆'),
        ),
        migrations.CreateModel(
            name='MaiZuoTask',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('status', models.IntegerField(choices=[(1, '未拉取'), (2, '更新中'), (3, '已完成'), (4, '更新失败')], default=1, verbose_name='状态')),
                ('error_msg', models.CharField(blank=True, max_length=200, null=True, verbose_name='错误信息')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('session', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='演出场次')),
            ],
            options={
                'verbose_name': '麦座拉取记录',
                'verbose_name_plural': '麦座拉取记录',
            },
        ),
        migrations.CreateModel(
            name='LiveRoomCps',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('plan_name', models.CharField(max_length=20, verbose_name='计划名称')),
                ('plan_id', models.CharField(blank=True, editable=False, max_length=50, null=True, verbose_name='计划ID')),
                ('merchant_phone', models.CharField(max_length=11, verbose_name='计划联系人手机号码')),
                ('status', models.IntegerField(choices=[(0, '待推送'), (5, '推送中'), (1, '进行中'), (2, '已完成'), (3, '已取消'), (4, '推送失败')], default=0, help_text='当短视频定向佣金计划开始时间小于当前时间时，不支持取消', verbose_name='状态')),
                ('error_msg', models.CharField(blank=True, editable=False, max_length=300, null=True, verbose_name='推送信息')),
                ('create_at', models.DateTimeField(auto_now_add=True, null=True, verbose_name='创建时间')),
                ('tiktok_users', models.ManyToManyField(blank=True, help_text='出于安全考虑，请求参数中含有“非团购带货达人的抖音号ID”会被视为异常，异常请求当天超过50次，则禁止应用当日再调用本接口。最多200个', related_name='_liveroomcps_tiktok_users_+', to='ticket.TiktokUser', verbose_name='已选择定向达人')),
                ('tiktok_users_add', models.ManyToManyField(blank=True, help_text='出于安全考虑，请求参数中含有“非团购带货达人的抖音号ID”会被视为异常，异常请求当天超过50次，则禁止应用当日再调用本接口', related_name='_liveroomcps_tiktok_users_add_+', to='ticket.TiktokUser', verbose_name='增加定向达人')),
                ('tiktok_users_delete', models.ManyToManyField(blank=True, help_text='仅当满足以下两个条件时，开发者才能取消达人：达人未发布视频当前时间 < 视频发布时间-1day。', related_name='_liveroomcps_tiktok_users_delete_+', to='ticket.TiktokUser', verbose_name='取消定向达人')),
            ],
            options={
                'verbose_name': '直播间定向佣金计划',
                'verbose_name_plural': '直播间定向佣金计划',
                'ordering': ['-pk'],
            },
        ),
        migrations.CreateModel(
            name='ContractInfo',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('police_approval', models.ImageField(blank=True, help_text='支持格式JPG/JPEG/PNG', null=True, upload_to='images/ticket/contract', validators=[django.core.validators.validate_image_file_extension], verbose_name='公安批文')),
                ('act_approval', models.ImageField(blank=True, help_text='支持格式JPG/JPEG/PNG', null=True, upload_to='images/ticket/contract', validators=[django.core.validators.validate_image_file_extension], verbose_name='活动批文')),
                ('company', models.ForeignKey(help_text='主办方提交保存后不可变更，请谨慎选择', on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowCompany', verbose_name='合同主办')),
                ('show', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowProject', verbose_name='演出')),
            ],
            options={
                'verbose_name': '合同信息',
                'verbose_name_plural': '合同信息',
            },
        ),
        migrations.CreateModel(
            name='CommonPlanCps',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=20, null=True, verbose_name='计划名称')),
                ('commission_rate', models.IntegerField(default=100, help_text='小程序商品可选值范围：100-2900', validators=[ticket.models.validate_commission_rate], verbose_name='商品的抽佣率(万分数)')),
                ('status', models.IntegerField(choices=[(0, '待推送'), (5, '推送中'), (1, '进行中'), (2, '暂停中'), (3, '已关闭'), (4, '推送失败')], default=0, help_text='状态为已关闭，不支持修改为其他值', verbose_name='状态')),
                ('content_type', models.IntegerField(choices=[(1, '仅短视频'), (2, '仅直播间'), (3, '短视频和直播间')], default=3, verbose_name='商品支持的达人带货场景')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('error_msg', models.TextField(blank=True, null=True, verbose_name='推送信息')),
                ('goods', models.ManyToManyField(help_text='每个商品只能仅有一个计划', limit_choices_to=models.Q(('push_status', 3), ('status', 1)), to='ticket.SessionInfo', verbose_name='抖音内部商品')),
                ('goods_add', models.ManyToManyField(blank=True, related_name='_commonplancps_goods_add_+', to='ticket.SessionInfo', verbose_name='增加抖音内部商品')),
            ],
            options={
                'verbose_name': '通用佣金计划',
                'verbose_name_plural': '通用佣金计划',
            },
        ),
        migrations.CreateModel(
            name='TicketCheckRecord',
            fields=[
            ],
            options={
                'verbose_name': '验票记录',
                'verbose_name_plural': '验票记录',
                'proxy': True,
                'indexes': [],
                'constraints': [],
            },
            bases=('ticket.ticketusercode',),
        ),
        migrations.CreateModel(
            name='VenuesLayers',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('layer', models.IntegerField(default=0, help_text='1层填1', verbose_name='楼层')),
                ('name', models.CharField(max_length=10, verbose_name='别名')),
                ('venue', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.Venues', verbose_name='场馆')),
            ],
            options={
                'verbose_name': '楼层管理',
                'verbose_name_plural': '楼层管理',
                'unique_together': {('venue', 'layer')},
            },
        ),
        migrations.CreateModel(
            name='TicketGiveDetail',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('record', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='give_codes', to='ticket.TicketGiveRecord', verbose_name='门票赠送记录')),
                ('ticket_code', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.TicketUserCode', verbose_name='演出票(座位)信息')),
            ],
            options={
                'verbose_name': '赠送门票',
                'verbose_name_plural': '赠送门票',
                'unique_together': {('record', 'ticket_code')},
            },
        ),
        migrations.CreateModel(
            name='ShowUser',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=30, verbose_name='姓名')),
                ('mobile', models.CharField(max_length=20, null=True, verbose_name='手机号')),
                ('id_card', models.CharField(blank=True, db_index=True, max_length=20, null=True, verbose_name='身份证号')),
                ('create_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户')),
            ],
            options={
                'verbose_name': '常用联系人',
                'verbose_name_plural': '常用联系人',
                'ordering': ['-pk'],
                'unique_together': {('user', 'name', 'mobile')},
            },
        ),
        migrations.CreateModel(
            name='ShowCollectRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_collect', models.BooleanField(default=True, verbose_name='是否收藏')),
                ('create_at', models.DateTimeField(blank=True, null=True, verbose_name='收藏时间')),
                ('show', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowProject', verbose_name='演出项目')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户')),
            ],
            options={
                'verbose_name': '用户演出收藏记录',
                'verbose_name_plural': '用户演出收藏记录',
                'ordering': ['-pk'],
                'unique_together': {('user', 'show')},
            },
        ),
        migrations.CreateModel(
            name='ShortVideoCpsItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('commission_rate', models.IntegerField(default=0, help_text='可设置为0-2900', validators=[ticket.models.validate_commission_rate], verbose_name='定向抽佣率(万分数)')),
                ('is_push', models.BooleanField(default=False, verbose_name='是否已推送')),
                ('good', models.ForeignKey(help_text='仅支持上架且审核通过的正式品', limit_choices_to=models.Q(('push_status', 3), ('status', 1)), on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='商品')),
                ('plan', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShortVideoCps', verbose_name='短视频定向佣金计划')),
            ],
            options={
                'verbose_name': '直播间佣金计划商品配置',
                'verbose_name_plural': '直播间佣金计划商品配置',
                'unique_together': {('plan', 'good')},
            },
        ),
        migrations.AlterUniqueTogether(
            name='sessionseat',
            unique_together={('seats', 'session_id')},
        ),
        migrations.AlterUniqueTogether(
            name='seat',
            unique_together={('venue', 'row', 'column', 'layers')},
        ),
        migrations.CreateModel(
            name='PerformerFocusRecord',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('is_collect', models.BooleanField(default=True, verbose_name='是否收藏')),
                ('create_at', models.DateTimeField(blank=True, null=True, verbose_name='收藏时间')),
                ('performer', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.ShowPerformer', verbose_name='演员')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to=settings.AUTH_USER_MODEL, verbose_name='用户')),
            ],
            options={
                'verbose_name': '用户演员关注记录',
                'verbose_name_plural': '用户演员关注记录',
                'ordering': ['-pk'],
                'unique_together': {('user', 'performer')},
            },
        ),
        migrations.CreateModel(
            name='LiveRoomCpsItem',
            fields=[
                ('id', models.AutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('commission_rate', models.IntegerField(default=0, help_text='可设置为0-2900', validators=[ticket.models.validate_commission_rate], verbose_name='定向抽佣率(万分数)')),
                ('is_push', models.BooleanField(default=False, verbose_name='是否已推送')),
                ('good', models.ForeignKey(help_text='仅支持上架且审核通过的正式品', limit_choices_to=models.Q(('push_status', 4), ('status', 1)), on_delete=django.db.models.deletion.CASCADE, to='ticket.SessionInfo', verbose_name='商品')),
                ('plan', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='ticket.LiveRoomCps', verbose_name='直播间定向佣金计划')),
            ],
            options={
                'verbose_name': '直播间佣金计划商品配置',
                'verbose_name_plural': '直播间佣金计划商品配置',
                'unique_together': {('plan', 'good')},
            },
        ),
    ]
